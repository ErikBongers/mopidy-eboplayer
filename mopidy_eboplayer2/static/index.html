<!DOCTYPE html>
<html lang="en">
<head>
    <title>{{ title }}</title>
    <meta charset="utf-8">
    <meta name="description" content="EboPlayer"/>
    <meta name="author" content="Erik Bongers"/>
    <meta name="copyright" content="(c) 2025 Erik Bongers"/>
    <meta name="mobile-web-app-capable" content="yes"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"/>

    <link rel="icon" type="image/gif" href="images/icons/musicbox32.gif"/>
    <link rel="shortcut icon" type="image/x-icon" href="images/icons/musicbox32.gif"/>
    <link rel="stylesheet" type="text/css" href="css/webclient.css"/>
    <link rel="stylesheet" type="text/css" href="vendors/font_awesome/css/font-awesome.min.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sofia+Sans+Extra+Condensed:ital,wght@0,1..1000;1,1..1000&family=Sofia+Sans:ital,wght@0,1..1000;1,1..1000&display=swap" rel="stylesheet">
</head>

<body data-websocket-url="{{ websocketUrl }}" data-hostname="{{ hostname }}" data-title="{{ title }}">
<div id="page" data-title="{{ title }}">

    <ul id="header" class="nobullet title condensed">
        <li>
            <button id="headermenubtn"><i class="fa fa-align-justify"></i></button>
        </li>
        <li>
            <p id="contentHeadline">Initializing...</p>
        </li>
        <li>
            <button id="headersearchbtn" onclick="switchContent('search' ); return false;" title="Search"><i class="fa fa-search"></i></button>
        </li>
    </ul>
    <!-- /header -->

    <div id="nowPlayingpane" class="pane">

        <div id="trackInfoBig">
            <div class="albumCoverContainer">
                <img id="albumCoverImg" src="images/default_cover.png" alt="Album cover"/><input id="trackslider" class="minimal" name="trackslider" type="range"/>
            </div>
        </div>

        <div class="nowPlaying-artistInfo">
            <h3 id="modalname"></h3>
            <p class="artistAlbumLine"><span id="modaldetail"></span></p>
        </div>

        <div id="slidercontainer"><!-- slider for track position -->
        </div>
    </div>
    <!-- /nowplaying -->


    <div id="nowPlayingFooter">
        <div class="footerControls" style="padding-left: 10px;">
            <div id="buttonBar">
                <div style="float: left"><img id="infocover" src="images/default_cover.png" alt="Album cover"/></div>
                <a href="#" onclick="controls.doPrevious(); return false"><span id="btprev" title="Previous"><i class="fa fa-fast-backward"></i></span></a>
                <a href="#" onclick="controls.doPlay(); return false"><span id="btplayNowPlaying" title="Play"><i class="fa fa-play"></i></span></a>
                <a href="#" onclick="controls.doNext(); return false"><span id="btnext" title="Next"><i class="fa fa-fast-forward"></i></span></a>
                <input id="volumeslider" data-highlight="true" name="volumeslider" data-mini="true" type="range" min="0" value="0" max="100"/>
                <a href="#" onclick="controls.doRandom(); return false"><span id="randombt" title="Random"><i class="fa fa-random"></i></span></a>
                <a href="#" onclick="controls.doRepeat(); return false"><span id="repeatbt" title="Repeat"><i class="fa fa-repeat"></i></span></a>
                <a href="#" onclick="controls.doConsume(); return false"><span id="consumebt" title="Consume"><i class="fa fa-cutlery"></i></span></a>
                <a href="#" onclick="controls.doSingle(); return false"><span id="singlebt" title="Single"><i class="fa fa-dot-circle-o"></i></span></a>
                <a href="#" onclick="controls.doShuffle(); return false"><span id="shufflebt" title="Shuffle"><i class="fa fa-arrows-v"></i></span></a>
            </div>
        </div>
    </div>
    <!-- /footer -->


    <div id="coverpopup" data-role="popup" data-theme="c">
        <a href="#" data-rel="back" data-role="button" data-icon="delete" data-iconpos="notext"
           class="ui-btn-right">Close</a>

        <h3 id="coverpopupalbumname"></h3>
        <h4 id="coverpopupartist"></h4>
        <a href="#" onclick="$('#coverpopup').popup('close');"><img id="coverpopupimage" src="" alt="Album cover"/></a>
    </div>

    <div id="artistpopup" data-role="popup" data-theme="c">
        <a href="#" data-rel="back" data-role="button" data-icon="delete" data-iconpos="notext"
           class="ui-btn-right">Close</a>
        <h4 id="artistpopupname">&nbsp;</h4>
        <a href="#" onclick="$('#artistpopup').popup('close');"><img id="artistpopupimage" src="" alt="Album artist"/></a>
    </div>

    <div data-role="popup" data-transition="none" data-theme="b" id="popupTracks">
        <div data-role="collapsible-set">
            <ul data-role="listview" data-icon="false" id="popupTracksLv">
                <li data-icon="play">
                    <a href="#" onclick="return controls.playTracks(PLAY_NOW, mopidy);">Play <span class="popupTrackName"></span></a>
                </li>
                <li data-icon="playAll" data-iconshadow="false">
                    <a href="#" onclick="return controls.playTracks(PLAY_ALL, mopidy);">Play All</a>
                </li>
                <li data-icon="playNext">
                    <a href="#" onclick="return controls.playTracks(PLAY_NEXT, mopidy);">Play Track Next</a>
                </li>
                <li data-icon="add">
                    <a href="#" onclick="return controls.playTracks(ADD_THIS_BOTTOM, mopidy);">Add Track to Bottom of Queue</a>
                </li>
                <li data-icon="addAll">
                    <a href="#" onclick="return controls.playTracks(ADD_ALL_BOTTOM, mopidy);">Add All to Bottom of Queue</a>
                </li>
                <li class="popupAlbumLi">
                    <a href="#" onclick="showAlbumPopup('#popupTracks', mopidy)">Show Album <span class="popupAlbumName"></span></a>
                </li>
                <li class="popupArtistsLi">
                    <a href="#" onclick="library.showArtist(null, mopidy)" class="popupArtistHref">Show Artist <span class="popupArtistName"></span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <div data-role="popup" data-transition="none" data-theme="b" id="popupQueue">
        <div data-role="collapsible-set">
            <ul data-role="listview" data-icon="false" id="popupQueueLv">
                <li data-icon="play">
                    <a href="#" onclick="return controls.playQueueTrack();">Play <span class="popupTrackName"></span></a>
                </li>
                <li data-icon="insert">
                    <a href="#" onclick="return controls.showAddTrackPopup();">Add a Track Below <span class="popupTrackName"></span></a>
                </li>
                <li data-icon="remove">
                    <a href="#" onclick="return controls.removeTrack('', mopidy);">Remove from Queue</a>
                </li>
                <li class="popupAlbumLi">
                    <a href="#" onclick="showAlbumPopup('#popupQueue', mopidy)">Show Album <span class="popupAlbumName"></span></a>
                </li>
                <li class="popupArtistsLi">
                    <a href="#" onclick="library.showArtist(null, mopidy)" class="popupArtistHref">Show Artist <span class="popupArtistName"></span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="return controls.showInfoPopup('', '#popupQueue', mopidy);">Show Track Info...</a>
                </li>
            </ul>
        </div>
    </div>

    <div data-role="popup" data-theme="b" id="popupAddTrack" class="popupDialog">
        <form>
            <p>Add a Track to the Queue
                <button class="btn" type="button" id="getPlayingBtn" title="Use URI of currently playing track" onclick="return controls.getCurrentlyPlaying('addTrackInput');">
                    Get Currently Playing URI
                </button>
                <input id="addTrackInput" placeholder="Track URI" class="span2" data-clear-btn="true"
                       onkeypress="return controls.checkDefaultButtonClick(event.keyCode, '#popupAddTrack');" type="text"/>
                <select name="select-add" id="select-add"></select>
            <div data-role="controlgroup" data-type="horizontal" align="center">
                <button class="btn" type="button" onclick="return $('#popupAddTrack').popup('close');">
                    Cancel
                </button>
                <button class="btn" type="button" data-default-btn="true" onclick="return controls.addTrack($('#addTrackInput').val(), mopidy);">
                    Add
                </button>
            </div>
        </form>
    </div><!--/add track to queue-->

    <div data-role="popup" data-theme="b" id="popupSave" class="popupDialog">
        <form>
            <p>Save Current Queue to a Playlist
                <input id="saveinput" placeholder="Playlist name" class="span2" data-clear-btn="true"
                       onkeypress="return controls.checkDefaultButtonClick(event.keyCode, '#popupSave');" type="text"/>
            <div data-role="controlgroup" data-type="horizontal" align="center">
                <button class="btn" type="button" onclick="return $('#popupSave').popup('close');">
                    Cancel
                </button>
                <button class="btn" type="button" data-default-btn="true" onclick="return controls.saveQueue();">
                    Save
                </button>
            </div>
        </form>
    </div><!--/save queue to playlist-->

    <div data-role="popup" data-theme="b" id="popupOverwrite" class="popupDialog">
        <form>
            <p>A playlist with the same name already exists. Overwrite?
            <div data-role="controlgroup" data-type="horizontal" align="center">
                <button class="btn" type="button" id="overwriteConfirmBtn">
                    Overwrite
                </button>
                <button class="btn" type="button" onclick="$('#popupOverwrite').popup('close'); return $('#popupSave').popup('open');">
                    Cancel
                </button>
            </div>
        </form>
    </div><!--/overwrite existing playlist-->

    <div data-role="popup" data-theme="b" id="popupConfirmDelete" class="popupDialog">
        <form>
            <p>Are you sure you want to remove <span class="popupStreamName"></span>?
            <div data-role="controlgroup" data-type="horizontal" align="center">
                <button class="btn" type="button" onclick="return controls.deleteFavourite();">
                    Remove
                </button>
                <button class="btn" type="button" onclick="$('#popupConfirmDelete').popup('close');">
                    Cancel
                </button>
            </div>
        </form>
    </div><!--/confirm delete stream-->

    <div data-role="popup" data-theme="b" id="popupShowInfo" class="popupDialog-full-width">
        <a href="#" data-rel="back" data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
        <table data-role="table" data-mode="reflow" class="ui-responsive table-stroke info-table">
            <thead>
            <tr>
                <th data-priority="persist"></th>
                <th data-priority="persist"></th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div><!--/show track info-->

     <div data-role="content" id="playlistspane" class="pane">
        <div class="ui-grid-a">
            <div class="ui-block-a">
                <h4>Playlists</h4>
            </div>
            <div align="right" class="ui-block-b" data-role="controlgroup" data-type="horizontal">
                <button class="btn" type="button" title="Refresh playlists" onclick="return controls.refreshPlaylists();">
                    <i class="fa fa-refresh"></i>
                </button>
            </div>
        </div>
        <div class="ui-grid-a pl-breakpoint">
            <div class="ui-block-a scroll" id="playlistslistdiv">
                <ul id="playlistslist" class="table"></ul>
            </div>
            <div class="ui-block-b scroll" id="playlisttracksdiv">
                <div>
                    <ul class="table" id="playlisttracks"></ul>
                </div>
            </div>
        </div>
    </div>
    <!--/playlistspane-->

    <div data-role="content" id="browsepane" class="pane">
        <div class="ui-grid-a">
            <div class="ui-block-a">
                <h4>Browse</h4>
            </div>
            <div align="right" class="ui-block-b refreshLibraryBtnDiv" data-role="controlgroup" data-type="horizontal">
                <button id="refreshLibraryBtn" class="btn" type="button" title="Refresh library">
                    <i class="fa fa-refresh"></i>
                </button>
            </div>
        </div>
        <div class="ui-grid">
            <ul id="browsetable" class="table"></ul>
        </div>
    </div>
    <!--/browsepane-->

    <div data-role="content" class="pane" id="currentpane">
        <div class="ui-grid-a">
            <div class="ui-block-a ui-block-a-min">
                <h4>Play Queue</h4>
            </div>
            <div align="right" class="ui-block-b ui-block-b-min">
                <div data-role="controlgroup" data-type="horizontal">
                    <button class="btn" type="button" title="Add a track to the queue" onclick="return controls.showAddTrackPopup();">
                        <i class="fa fa-plus"></i>
                    </button>
                    <button class="btn" type="button" title="Save queue to playlist" onclick="return controls.showSavePopup();">
                        <i class="fa fa-bookmark-o"></i>
                    </button>
                    <button class="btn" type="button" title="Clear queue" onclick="return controls.clearQueue();">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
            </div>
        </div>
        <div class="ui-grid">
            <ul class="table" id="currenttable"></ul>
        </div>
    </div>

    <div data-role="content" class="pane" id="albumspane">
        <a href="#coverpopup" data-position-to="window" data-rel="popup"><img height="90" src="" id="albumviewcover" alt="Album cover"/></a>

        <h3 id="h_albumname"></h3>
        <h5 id="h_albumartist"></h5>
        <ul class="table" id="albumstable"></ul>

    </div>

    <div data-role="content" class="pane" id="artistspane">
        <a href="#artistpopup" data-position-to="window" data-rel="popup"><img height="90" src="" id="artistviewimage" alt="Album artist"/></a>

        <h3 id="h_artistname"></h3>
        <ul class="table" id="artiststable"></ul>
    </div>

    <div data-role="content" class="pane" id="searchpane">
        <h4>Search</h4>

        <div class="ui-grid pl-breakpoint">
            <div class="ui-block">
                <form>
                    <p>Search for artists, albums, or specific tracks.
                        <select id="selectSearchService"></select>
                        <input id="searchinput" placeholder="Search term" class="span2" onkeypress="return library.searchPressed(event.keyCode);" type="text"/>
                        <button class="btn" type="button" onclick="return library.initSearch(event.value);">
                            Search!
                        </button>
                </form>
            </div>
        </div>

        <div class="ui-grid-a srch-breakpoint">
            <div class="ui-block-a" id="searchartists">
                <div data-role="listview" data-inset="true">
                    <div data-role="header">
                        <h4>Artists</h4>
                    </div>
                    <div data-role="content">
                        <ul data-role="listview" id="artistresulttable"></ul>
                    </div>
                </div>
            </div>
            <div class="ui-block-b" id="searchalbums">
                <div data-role="listview" data-inset="true">
                    <div data-role="header">
                        <h4>Albums</h4>
                    </div>
                    <div data-role="content">
                        <ul data-role="listview" id="albumresulttable"></ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="" id="searchtracks">
            <h4>Tracks</h4>
            <ul id="trackresulttable" class="table"></ul>
        </div>
    </div>
    <!-- search div -->

    <div data-role="content" class="pane" id="streampane">
        <h4>Streams!!!</h4>

        <div class="ui-grid-a pl-breakpoint">
            <div class="ui-block-a" style="padding: 5px">
                <form>
                    <p>Play a specific stream/track and optionally save it to your favourites.
                        <button class="btn" type="button" onclick="return controls.getCurrentlyPlaying('streamuriinput', 'streamnameinput');">
                            Get currently playing
                        </button>
                        <input id="streamuriinput" placeholder="URI" class="span2" onkeypress="return controls.streamPressed(event.keyCode);" type="text"/>
                        <button class="btn" type="button" onclick="return controls.playStreamUri();">
                            Play
                        </button>

                        <input id="streamnameinput" placeholder="Name" class="span2" onkeypress="return controls.streamPressed(event.keyCode);" type="text"/>
                        <button class="btn" type="button" onclick="return controls.addFavourite();">
                            Save
                        </button>
                        <br/>
                </form>
            </div>
            <div class="ui-block-b" style="padding: 5px">
                <ul id="streamuristable" class="table"></ul>
            </div>
        </div>
    </div>


</div>
<!-- /page -->

<!-- use lastfm for image search -->
<script type="text/javascript" src="vendors/lastfm/lastfm.api.md5.js"></script>
<script type="text/javascript" src="vendors/lastfm/lastfm.api.js"></script>
<script type="text/javascript" src="vendors/lastfm/lastfm.api.cache.js"></script>

<script type="module" src="generated/bundle.js"></script>

<!-- load plugins -->
<script type="text/javascript" src="plugins/plugin-loader.js"></script>
</body>
</html>
