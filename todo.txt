* Album details: make links of bot genre and it's replacement.
  > Make an ExpandedGenre, containing refs with uri's for both genre and replacement.

* Simplify Now Playing?
  > Hide timeline?
    > Playbar drop down menu:
    > separate from repeat icon
    > add item to show timeline.

* Genre: also show artist for a genre.

* eboback: rework favorite uri <-> item translation to use relative paths by default
  > relative path to...
    1. playlist file.
      > .wpf files use this method, with even back tracking with dot-dot paths.
    2. media dir, if 1. does not match.
  > but also allow absolute paths
    > if within media dir! check! otherwise the "media dir" is a useless concept.

* After scan, cache should be completely invalid on webserver(s).
  > how?
  > eTag should do it.

* Diving updates the UI too much.
  > how to delay messages?

* When selecting a new genre for album: return to album.
  > reload album data, only for this album.
    > replace the cached album
      > send message that album has been changed.

* Expand for other backends like youtube and spotify.

* Search: only show first...dunno...results.
  > 30?
    > 20 on phone, 30 or more on desktop.
  > only expand those results!!!

* See if we can get rid of bigTrackView
  > clicking on an timline item should go immediately to
    - big album
    - a stream/radio view?
      > perhaps this should stay in Playing Now?

* track.artists: perhaps split into separate table if multiple artists are allowed?

Popular
--------
  > should be able to get populars based on :
    - count(uri)
    - count(uri) since a date

* Empty browse filter shows most recent list.
  > and/or popular?
  > backend.py already has a play_back_started listener
    > store in database.
      > log EACH play start.
      > this allows fine-tuned starting, not affected by too old history.
  > replace mopidy history with own history.
    > limit to last n, with option to look further.
    > allow cleanup of history, full or partial (older than..., remove track/album, scheme other than eboback...)

* Show something while loading the whole database.
  > test in Whats new.

* Album view: highlight current/playing track.

* Load data when list item becomes visible: https://www.youtube.com/watch?v=Jo8ABAJtMM0

* Add button in Browse to show hidden items (replaced genres)
  > what icon? Eye?

* Add menus to browse results.
  > Keep this generic.
  > Add "Rename to" for genres.

* Grouping at album/artist level should happen in playlists.

* Scan: fill genres in track_genre table.
> when a new track is added, genres are added as-is.
> when viewing track/album details: genres are striped-out when there is a replace-genre.
  > genres can be added/removed at album, artist and track level.

> a track has own genres, album genres and artist genres.



* Make distinction between play buttons and other/edit buttons.



* Ref.type = "genre" does not exist in mopidy.
  > a genre cannot directy be represended by a Ref because these are the possible Ref types: "album" | "artist" | "directory" | "playlist" | "track"
  > DAMN !!!!!!
  > mopidy-local solves this with a Ref.directory.
  > in principle, mopidy.browse() can only return Ref.dirs and Ref.tracks, but mopidy-local does NOT keep to that restriction!
  > two options:
    - Use/abuse Ref.directory or Ref.playlist, like mopidy-local.
      > but uris are opaque.
      > or...are they.
      > they are opaque for mopidy, but not necessarily for eboback/player.
        > a uri/ref could be a full definition of something to play. mopidy-local has some quite defined uris.
    - bypass via www.
      > return a proprietry json.
      > but in browse-mode, we're only interested in diving into group structures until we hit only tracks.


* In browse filter: don't just list albums or groups, but also tracks (which is by default disabled).
  > important for filter/playlist creation below.

* Is the browseFilter the full criteria or does the parent matter?
  > parent may be genre, artist (and maybe even playlist?)
  > a parent of a current/active browse filter is ALWAYS a concrete group. A group is a Genre, Artist, Playlist. (Album is not considered a group...or should it be?)
* A playlist could be build from browse windows, and new browse 'sessions' could be added to existing playlists...

* What is the difference between the browss and edit playlist window?
  - Multiple filter sections AND/OR
  -
* Save as playlist: Just a button that brings you to the playlist edit page where
  - The name field is shown.
  - The (last) browseFilter.
  - The results
  - Buttons to save as:
    - save tracks as fixed playlist
    - save filter as generic playlist.
    > buttons ABOVE results of course.
  > Edit playlist has a state that is stored in storage so you can refresh it (or even navigate away and come back?)

Create a Savall playlist
=========================
Scenario
--------
- Browse for "Savall", show Artists, Albums and tracks.
- Click the "Save as playlist" button.
- Enter name.
- Click fixed or generic long buttons.

* start "scan" from gui -> settings.
  > perhaps a separate scan images command?
* Play bar: clicking on image moves the player list to the current track (as high as possible, if more items are in the player list).
* "edit playlists" shows the criteria AND the resulting tracks.
* create a (generic) dialog with a slot content.

* Start playlist creation by allowing to safe a browse filter as a playlist.
  > popup:
    - save tracks as fixed playlist
      > prompt for name.
    - save filter as generic playlist.
      > got prefilled playlist editor.
* create table playlist_filters
  - fields: search_text, album, track,..., fk_playlist.
* use the existing playlist table
  > when querying a playlist, see if filters are defined and include those results.


Playlists
===========
1. View
--------
* Add edit button to list button bar.

2. Edit
---------
* Edit 'live', that is, show the results in real time.
* allow AND and OR filters.

3. Filter
----------
A playlist filter is like a browse filter
  - search text + type buttons.

* Create view for playlists
   > fetch expanded tracks
   > Similar to album view:
     > same buttons (to get started)
     > no image (for now?)
       > or a set of images behind each other?
       > clicking is browsing?
         > how about going to the album?

* dblclick on album track > play

What do I need?
- Build playlists
  > in Browse, when clicking on a playlist - open the playlist page.
    > does a playlist item have a user defined name?

* refresh dead connection on browser "wake up"
  >>> https://blog.alexmaccaw.com/javascript-wake-event/
  > or this alternative of window blur/focus
    >>> https://stackoverflow.com/questions/13798516/javascript-event-for-mobile-browser-re-launch-or-device-wake
